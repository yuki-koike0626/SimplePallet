# Simple palet

macOS 向けのシンプルなウィンドウ管理アプリ。キーボードショートカットで最前面ウィンドウを「最大化 / 左半分 / 右半分」に即座にスナップできます。

## 機能

- **3つのスナップアクション**
  - 最大化: `⌘ + ↑`（デフォルト）
  - 左半分: `⌘ + ←`（デフォルト）
  - 右半分: `⌘ + →`（デフォルト）

- **マルチディスプレイ対応**
  - アクティブ中のウィンドウの大きさを計算し最大化、左半分、右半分を実現

- **メニューバー常駐**
  - Dockに表示せず、メニューバーから操作

## セットアップ

**詳細なセットアップ手順は [SETUP_INSTRUCTIONS.md](SETUP_INSTRUCTIONS.md) を参照してください。**

### クイックスタート

1. Xcodeでプロジェクトを開く
2. KeyboardShortcuts依存関係を追加（詳細はSETUP_INSTRUCTIONS.md参照）
3. 新しいファイルをプロジェクトに追加
4. 古いファイルを削除
5. ビルド & 実行 (⌘R)

### アクセシビリティ権限の設定

Simple palet がウィンドウを操作するには、macOS のアクセシビリティ権限が必要です。

#### 設定手順：

1. アプリを初回起動すると、権限リクエストのダイアログが表示されます
2. 「システム環境設定を開く」をクリック
3. 「プライバシーとセキュリティ」→「アクセシビリティ」に移動
4. 鍵アイコンをクリックしてロック解除
5. リストから「Simple palet」を探してチェックを入れる
6. アプリを再起動

### 3. 使い方

1. メニューバーにアイコンが表示されます
2. デフォルトのショートカットで即座にウィンドウをスナップ
3. メニューバーアイコンから設定画面を開いてカスタマイズ

## 動作環境

- **対応OS**: macOS 13 Ventura 以降
- **対応アーキテクチャ**: Intel / Apple Silicon (Universal Binary)

## トラブルシューティング

### ショートカットが動作しない

1. **アクセシビリティ権限を確認**
   - システム環境設定 → プライバシーとセキュリティ → アクセシビリティ
   - Simple palet にチェックが入っているか確認

2. **ショートカットの競合をチェック**
   - 他のアプリが同じショートカットを使用していないか確認
   - 設定画面から別のキーに変更してみる

3. **一時停止状態を確認**
   - メニューバーから「一時停止」になっていないか確認

### フルスクリーンアプリで動作しない

仕様です。フルスクリーンモードのアプリはウィンドウ操作の対象外となります。
フルスクリーンを解除してから操作してください。

### 特定のアプリで動作しない

一部のアプリ（システム環境設定、一部のモーダルウィンドウなど）は、
アクセシビリティ API で操作できない場合があります。

## プライバシー

Simple palet は以下のポリシーに基づいています：

- **データ収集なし**: 個人情報や使用統計は一切収集しません
- **ローカル処理のみ**: 全ての処理はデバイス内で完結します
- **必要最小限の権限**: アクセシビリティ権限のみを要求します

## 開発

### プロジェクト構成

```
SimplePallet/
├── SimplePallet/
│   ├── SimplePalletApp.swift              # エントリーポイント
│   ├── App/                               # UI関連
│   │   ├── MenuBarController.swift
│   │   ├── SettingsView.swift
│   │   └── ToastView.swift
│   ├── Core/                              # ビジネスロジック
│   │   ├── KeyboardShortcutManager.swift  # グローバルショートカット管理
│   │   ├── WindowManager.swift            # ウィンドウ操作
│   │   ├── ScreenCalculator.swift         # 画面計算
│   │   └── AccessibilityPermission.swift  # 権限管理
│   ├── Models/                            # データモデル
│   │   ├── SnappingAction.swift           # アクション定義
│   │   └── AppSettings.swift              # 設定管理
│   └── Resources/
├── SETUP_INSTRUCTIONS.md                  # セットアップ手順
└── README.md
```

### 依存ライブラリ

- [KeyboardShortcuts](https://github.com/sindresorhus/KeyboardShortcuts): グローバルキーボードショートカット登録（シンプルで信頼性が高い）

### ビルドコマンド

```bash
# デバッグビルド
swift build

# リリースビルド
swift build -c release

# テスト実行
swift test
```

## ライセンス

Copyright © 2025 Yuki. All rights reserved.

## サポート

問題が発生した場合は、GitHub Issues で報告してください。

